# このディレクトリは？
このディレクトリにはエッジデバイスのコード例を保管しています。<br>
Arduino環境で開発したもので、ハードウエアはM5シリーズを使っています。

Arduino IDEでコンパイルできるようにするため、それぞれのディレクトリをArduino IDEが参照しているパスにコピーしてお使いください。

# コード
## AtomS3_HTTP_POST_test.ino
### 概要
環境センサで気温などを測定してGASに送信するプログラムです。
### ハードウエア
- M5stack Atom S3 (マイコン)
- M5stack ENV Ⅳ (温度センサ)
- wifi通信環境
### 設定
wifiへの接続のためのSSIDや、GASのURLは別途ヘッダファイルに記載します。(connection_IDs.h)
サンプルファイルを参照してください。
### 動作
10分おきに測定を行い、都度GASに向けて送信しています。
測定していないときはスリープモードに入るようにして、全体として低消費電力を狙っています。
スリープモードから解除されるとリセットがかかったのと等価になり、プログラムは最初から(setup()から)実行されます。
スリープからの復帰ごとにwifiと接続作業を行いますが、接続までにかかる時間にばらつきがあります。その上、指定時間だけスリープする関数を使っているので、測定間隔はかなりばらつきがあり、正確ではありません。
正確な時間間隔が必要であれば、RTCをつかったスリープ解除の方法を考える必要があるかもしれません。
#### メモ
- M5stackのセンサの駆動用ライブラリは、なぜかうまく動きません。その代わりにAdafruitの同じデバイス用ライブラリを用いています。
- I2Cバスの初期化が必要なのか、必要でないのかがいまいち理解できていません。が、一応動いています。
- シリアルモニタに動作状況を吐き出すようにしています。速度は115200bpsです。
